# ChatGPT Comment Action

This GitHub Action automatically generates a PR comment based on the code changes using OpenAI API. It provides a summary of the changes in the pull request and posts a comment on the pull request with the generated explanation.

## Inputs

| Name             | Description                | Required | Default |
|------------------|----------------------------------|----------|---------|
| `github-token`   | GitHub Token          | Yes      |         |
| `open-api-key`   | OpenAPI Token                    | Yes      |         |
| `max-prompt-tokens` | The maximum number of tokens to use for the prompt | No | '10000' |
| `ignore-paths`   | Comma separated list of paths and files to ignore | No | |

## Example Usage

```yaml
on: [pull_request]

jobs:
  chatgpt_comment_job:
    runs-on: ubuntu-latest
    name: A job to generate PR comment based on code changes
    steps:
    - name: ChatGPT Comment action step
      id: chatgpt
      uses: actions/chatgpt-comment@v1
      with:
        github-token: ${{ secrets.GITHUB_TOKEN }}
        open-api-key: ${{ secrets.OPENAI_API_KEY }}
        max-prompt-tokens: '2048'
        ignore-paths: 'README.md, docs/*'
```

## Action.yml

The `action.yml` file contains the metadata for the action.

```yaml
name: 'ChatGPT Comment'
description: 'Autogenerated a PR comment based on the code changes'
inputs:
  github-token:
    description: 'GitHub Token'
    required: true
  open-api-key:
    description: 'OpenAPI Token'
    required: true
  max-prompt-tokens:
    description: 'The maximum number of tokens to use for the prompt'
    required: false
    default: '2048'
  ignore-paths:
    description: 'comma separated list of paths and files'
    required: false
runs:
  using: 'node16'
  main: 'dist/index.js'
```

## Index.js

The `index.js` file contains the main logic for the action.

```javascript
// Import required packages and libraries
const axios = require('axios');
const core = require('@actions/core');
const github = require('@actions/github');
const { encode, decode } = require('gpt-3-encoder')

const { Configuration, OpenAIApi } = require("openai");
const { Octokit } = require('@octokit/rest');
const { context: githubContext } = require('@actions/github');

// ... (rest of the code)
```

## License

This project is licensed under the MIT License.
